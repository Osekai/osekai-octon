@using System.Drawing
@using Osekai.Octon.WebServer
@using Osekai.Octon.WebServer.Helpers
@using Osekai.Octon.WebServer.Drawing
@using Osekai.Octon.WebServer.Extensions
@model Osekai.Octon.WebServer.Pages.AppBaseLayout

@{
    Layout = "BaseLayout";
    
    Color color = Model.AccentOvveride?.Color ?? Model.AppTheme!.Color;
    Color darkColor = Model.AccentOvveride?.DarkColor ?? Model.AppTheme!.DarkColor;

    Hsl colorHsl = color.ToHsl();
    Hsl darkColorHsl = darkColor.ToHsl();
}
 
@section HeadExtension {
    <link rel="stylesheet" href="@StringWithVersionQueryHtmlContent.Create($"/static/{Model.App.SimpleName}/css/main.css")" />
    @if (Model.App.Experimental) {<link rel="stylesheet" href="@StringWithVersionQueryHtmlContent.Create($"/static/shared/css/experimental/main.css")" />}
    <style>
    html{
        --accentdark: @($"{darkColor.R},{darkColor.G},{darkColor.B}");
        --accent: @($"{color.R},{color.G},{color.B}");
        --accentdark_hue: @(darkColorHsl.H)deg;
        --accent_hue: @(colorHsl.H)deg;
        --accentdark_saturation: @(darkColorHsl.S)%;
        --accent_saturation: @(colorHsl.S)%;
        --accentdark_value: @(darkColorHsl.L)%;
        --accent_value: @(colorHsl.L)%;
        --accentdark_valueoffset: @(Model.AppTheme!.DarkHslValueMultiplier);
        --accent_valueoffset: @(Model.AppTheme!.HslValueMultiplier);
    }
    </style>
    <style id="custom_theme_container"></style>
    <script>    
        const christmas = "0";
        const medals = @(Json.Serialize(Model.Medals));
        const nAppId = "@Model.App.Id";
        const version = "@Constants.Version";
        const nUserID = @(Model.CurrentOsuUser?.Id ?? -1);
        const nUsername = "@(Model.CurrentOsuUser?.Username ?? "guest")";
        const nRights = 2;
        const userGroups = @(Json.Serialize(Model.UserGroups));
    </script>
    
}

@RenderBody()